<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gap Filler - Home</title>
    <link rel="stylesheet" href="styles.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">

    <style>
        /* Center the questionnaire vertically-ish */
        .main-content {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 200px);
            padding: 40px 0;
        }

        .questionnaire-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 24px;
        }

        /* === CAROUSEL + SLIDER AREA (no inner white box) === */

        /* === CAROUSEL + SLIDER AREA (no inner white box) === */

        .carousel-area {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 14px;
            border: 1px solid #e0e0e0;
            width: 1025px;
            height: 450px;
            padding: 16px;
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.08);
        }

        /* Three-image row */
        .image-strip {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 24px; /* bigger spacing */
        }

        /* Base styling for all images */
        .carousel-img {
            /* Box around images */
            border: 2px solid #d0d0d0;
            border-radius: 12px;
            padding: 8px;
            background: white;
            object-fit: contain;
            transition:
                opacity 0.25s ease,
                transform 0.25s ease,
                filter 0.25s ease;
        }

        /* Side (previous/next) images */
        .carousel-img.side {
            width: 145px;      /* increased from 120px */
            height: 145px;
            opacity: 0.40;
            transform: scale(0.95);
            filter: grayscale(40%);
        }

        /* Center image (main) */
        .carousel-img.center {
            width: 300px;      /* increased from 200px */
            height: 300px;
            opacity: 1;
            transform: scale(1);
            filter: grayscale(0%);
        }

        /* Hide side when no neighbor */
        .carousel-img.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .slider-scale {
            width: 360px;      /* widened a bit to match new image size */
            color: black !important;
            display: flex;
            justify-content: space-between;
            font-size: 1rem;
        }

        .work-slider {
            width: 360px;      /* wider slider */
        }

        .slider-box{
            position: absolute;
            bottom: 20px;         /* adjust as needed */
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;

            width: 400px;
            padding: 18px;

            border: 2px solid #d0d0d0;
            border-radius: 12px;
            background: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.06);
        }
    </style>
</head>

<body>
    <div class="container">

        <header class="header">
            <a href="index.html" class="logo-link">
                <div class="logo">Gap Filler</div>
            </a>

            <ul class="header-nav">
                <li class="header-nav-item"><a href="index.html">Home</a></li>
                <li class="header-nav-item"><a href="allEvents.html">All Events</a></li>
                <li class="header-nav-item"><a href="addEvent.html">Add Event</a></li>
                <li class="header-nav-item"><a href="pastEvents.html">View Past Events</a></li>
            </ul>

            <div class="header-icons">
                <div class="theme-toggle">
                    <input type="checkbox" id="theme-switch" class="theme-switch-input">
                    <label for="theme-switch" class="theme-switch-label">
                        <span class="theme-icon sun">‚òÄÔ∏è</span>
                        <span class="theme-icon moon">üåô</span>
                    </label>
                </div>

                <div class="profile-dropdown">
                    <button class="icon profile-icon" id="profileButton">üë§</button>
                    <div class="dropdown-menu" id="dropdownMenu">
                        <a href="index.html" class="dropdown-item">Logout</a>
                    </div>
                </div>
            </div>
        </header>

        <div class="breadcrumb-wrapper">
            <div class="breadcrumb-container" id="breadcrumbs"></div>
        </div>

        <main class="main-content">

            <div class="questionnaire-container">

                <div class="progress-indicator">
                    <div class="progress-circle" onclick="window.location.href='q1.html'">1</div>
                    <div class="progress-circle" onclick="window.location.href='q2.html'">2</div>
                    <div class="progress-circle" onclick="window.location.href='q3.html'">3</div>
                    <div class="progress-circle active" onclick="window.location.href='q4.html'">4</div>
                </div>

                <h1 class="question-title">How much school work do you have?</h1>

                <!-- === CAROUSEL DIRECTLY IN THE PAGE === -->
                <div class="carousel-area">
                    <div class="image-strip">
                        <!-- previous image (faded) -->
                        <img id="workImgLeft" class="carousel-img side hidden" alt="previous workload">

                        <!-- current/main image -->
                        <img id="workImgCenter" class="carousel-img center" alt="current workload">

                        <!-- next image (faded) -->
                        <img id="workImgRight" class="carousel-img side hidden" alt="next workload">
                    </div>

                    <div class="slider-box">
                        <div class="slider-scale">
                            <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                        </div>

                        <input type="range" min="1" max="5" value="3" class="work-slider" id="workSlider">
                    </div>
                </div>

                <div class="nav-buttons">
                    <button class="btn-nav btn-previous" onclick="window.location.href='q3.html'">Previous</button>
                    <button class="btn-nav btn-next" onclick="window.location.href='tailoredEvents.html'">Find My
                        Events</button>
                </div>

            </div>
        </main>

        <footer class="footer">
            <div class="footer-note">2025 Gap Filler | COMP 3020 Project Prototype (Group 9)</div>
        </footer>

    </div>

    <script>
        /* --- Profile dropdown --- */
        const profileButton = document.getElementById('profileButton');
        const dropdownMenu = document.getElementById('dropdownMenu');

        profileButton.addEventListener('click', e => {
            e.stopPropagation();
            dropdownMenu.classList.toggle('show');
        });

        document.addEventListener('click', e => {
            if (!profileButton.contains(e.target) && !dropdownMenu.contains(e.target)) {
                dropdownMenu.classList.remove('show');
            }
        });

        /* --- Dark mode --- */
        const themeSwitch = document.getElementById('theme-switch');
        const currentTheme = localStorage.getItem('theme') || 'light';

        document.body.classList.toggle('dark-mode', currentTheme === 'dark');
        themeSwitch.checked = (currentTheme === 'dark');

        themeSwitch.addEventListener('change', function () {
            const isDark = this.checked;
            document.body.classList.toggle('dark-mode', isDark);
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        });

        /* --- Slider-driven carousel (3-image layout) --- */

        const slider = document.getElementById("workSlider");
        const imgLeft = document.getElementById("workImgLeft");
        const imgCenter = document.getElementById("workImgCenter");
        const imgRight = document.getElementById("workImgRight");

        // Your images in order 1‚Äì5
        const workImages = [
            "q4Photos/1.png",
            "q4Photos/2.png",
            "q4Photos/3.png",
            "q4Photos/4.png",
            "q4Photos/5.png"
        ];

        // Load saved slider value if it exists
        const savedValue = localStorage.getItem("workSliderValue");
        if (savedValue) {
            slider.value = savedValue;
        }

        // Track previous position to know direction (left/right)
        let lastIndex = parseInt(slider.value, 10) - 1;


        function renderCarouselFromSlider() {
            const value = parseInt(slider.value, 10); // 1‚Äì5
            const index = value - 1;                  // 0‚Äì4

            // Determine slide direction
            let direction = null;
            if (index > lastIndex) {
                direction = "right";  // moving towards higher work level
            } else if (index < lastIndex) {
                direction = "left";   // moving towards lower work level
            }

            // Update center image source/alt
            imgCenter.src = workImages[index];
            imgCenter.alt = `Work level ${value}`;

            // Update left (previous) image
            if (index > 0) {
                imgLeft.src = workImages[index - 1];
                imgLeft.alt = `Work level ${value - 1}`;
                imgLeft.classList.remove("hidden");
            } else {
                imgLeft.classList.add("hidden");
            }

            // Update right (next) image
            if (index < workImages.length - 1) {
                imgRight.src = workImages[index + 1];
                imgRight.alt = `Work level ${value + 1}`;
                imgRight.classList.remove("hidden");
            } else {
                imgRight.classList.add("hidden");
            }

            // Remove any previous animation classes so we can re-apply them
            imgCenter.classList.remove("slide-from-left", "slide-from-right");

            // Trigger reflow so the next class add will restart the CSS animation
            void imgCenter.offsetWidth;

            // Add animation class based on direction
            if (direction === "right") {
                imgCenter.classList.add("slide-from-right");
            } else if (direction === "left") {
                imgCenter.classList.add("slide-from-left");
            }

            // Remember current index for next move
            lastIndex = index;

            // Save slider value
            localStorage.setItem("workSliderValue", value);
        }



        slider.addEventListener("input", renderCarouselFromSlider);
        window.addEventListener("load", renderCarouselFromSlider);
        renderCarouselFromSlider();

        /* --- Breadcrumbs --- */
        function renderBreadcrumbs() {
            const breadcrumbs = document.getElementById('breadcrumbs');
            if (breadcrumbs) {
                breadcrumbs.innerHTML = `
                    <a href="index.html" class="breadcrumb-link">Home</a>
                    <span class="breadcrumb-separator">></span>
                    <span class="breadcrumb-current">Questionnaire</span>`;
            }
        }
        renderBreadcrumbs();
    </script>

</body>

</html>